📄 Moonwave BTC PRD v2.0 - 자산관리 기능 100% 포함

# 1. 개요

## 프로젝트명
Moonwave BTCs 매도지표 & 자산관리 웹서비스 (btc.moonwave.kr)

## 목표
온체인 지표 기반 BTCs 점수를 활용한 분할매도 전략과 함께, 사용자의 전체 자산(코인, 주식, 금 등)을 통합 관리하고, 비중 분석·리밸런싱/자동 알림까지 지원하는 PWA 기반 앱 개발.

## 배포환경
- Vercel + Firebase (백엔드)
- PWA 100% 도입
- 모바일 우선 반응형 디자인

## AI 분석
- Claude CLI 100% 활용 (분할매도 추천, 리포트 자동화)
- 실시간 자산 분석 및 추천

## 개발 환경
- Cursor AI (IDE 기반 AI 개발 파트너)
- Claude CLI (분석/자동화)
- Firebase/Vercel 완전 호환

---

# 2. 자산관리 기능 상세 명세

## 2.1 헤더 영역 (Header Section)

### 2.1.1 총 자산 표시
- **기능**: 현재 보유 자산의 총 평가액 표시
- **표시 형식**: "총 자산" + 드롭다운 화살표
- **아이콘**: 녹색 Moonwave 로고 (M/W 형태)
- **동작**: 클릭 시 자산 유형별 필터링 옵션 제공

### 2.1.2 우측 헤더 버튼
- **업그레이드 버튼**: 프리미엄 기능 안내 및 결제 페이지 연결
- **새로고침 버튼**: 실시간 시세 업데이트
- **메뉴 버튼**: 햄버거 메뉴 (녹색 알림 점 포함)

## 2.2 메인 콘텐츠 영역

### 2.2.1 섹션 제목
- **제목**: "투자" (Investment)
- **위치**: 헤더 바로 아래

### 2.2.2 뷰 전환 탭
- **시세 탭**: 현재 선택된 상태
  - 실시간 시장 가격 표시
  - 24시간 변동률 표시
- **평가 탭**: 
  - 개인 매입가 대비 평가
  - 수익률 계산

### 2.2.3 수익 표시 버튼
- **총 수익**: 절대 수익금 표시
- **총 수익 ↑**: 수익률 표시 (화살표로 상승 표시)

## 2.3 자산 목록 (Asset List)

### 2.3.1 자산 카드 구조
각 자산은 다음 정보를 포함:

#### 기본 정보
- **아이콘**: 자산별 고유 아이콘
- **이름**: 자산명 (한글/영문)
- **상태 라벨**: "UP" (상승), "DOWN" (하락) 등

#### 수량 정보
- **보유 수량**: 정확한 소수점 표시
- **단위**: 개, 주, 좌 등 자산별 적절한 단위

#### 가치 정보
- **현재 가치**: 원화 표시 (천 단위 구분자 포함)
- **수익 정보**: 
  - 절대 수익: +원화 금액
  - 수익률: +XX.XX% (소수점 2자리)

### 2.3.2 지원 자산 유형

#### 암호화폐 (Cryptocurrency)
1. **비트코인 (Bitcoin)**
   - 아이콘: 주황색 'B' 로고
   - 단위: 개 (BTC)
   - 예시: 3.45807418개, 557,759,701원, +339,509,966원 (+155.56%)

2. **이더리움 (Ethereum)**
   - 아이콘: 파란색 다이아몬드 'C' 로고
   - 단위: 개 (ETH)
   - 예시: 4.05466116개, 24,246,874원, +10,229,630원 (+72.98%)

3. **솔라나 (Solana)**
   - 아이콘: 보라색 줄무늬 'C' 로고
   - 단위: 개 (SOL)
   - 예시: 9.7569개, 2,482,155원, +657,305원 (+36.02%)

4. **바이낸스 코인 (Binance Coin)**
   - 아이콘: 노란색 사각형 'C' 로고
   - 단위: 개 (BNB)
   - 예시: 0.54536338개, 641,893원, +142,893원 (+28.64%)

5. **리플 (Ripple)**
   - 아이콘: 파란색 'XRP' 로고
   - 단위: 개 (XRP)
   - 예시: 36,321원 (수량 부분 가려짐)

6. **갈라코인 (Gala Coin)**
   - 아이콘: 흰색 큐브 아웃라인 'C' 로고
   - 단위: 개 (GALA)
   - 예시: 628,040개, 14,652,173원, +2,091,373원 (+16.65%)

7. **KAIA**
   - 아이콘: 녹색 'kaia' 로고 'b' 라벨
   - 단위: 개
   - 예시: 28,511개, 6,072,843원, +940,863원 (+18.33%)

#### 주식 (Stocks)
8. **KT**
   - 아이콘: 검은색 'kt' 로고
   - 단위: 주
   - 예시: 310주, 17,112,000원, +6,903,031원 (+67.62%)

#### 원자재 (Commodities)
9. **금 (99.99k)**
   - 아이콘: 금색 금괴 아이콘
   - 단위: 좌
   - 예시: 69.25좌, 10,364,648원, +5,340,560원 (+106.30%)

## 2.4 광고 배너 (Advertisement Banner)

### 2.4.1 광고 콘텐츠
- **게임명**: "Pink Plin"
- **광고 문구**: "AD 그냥 플레이해 보세요 그냥 플레이해 보세요"
- **아이콘**: 핑크색 버블 형태 게임 아이콘
- **게임 요소**: x50, 100 등의 숫자 표시

### 2.4.2 액션 버튼
- **정보 버튼**: 'i' 아이콘 (광고 상세 정보)
- **설치 버튼**: 파란색 "설치하기" 버튼

## 2.5 하단 네비게이션 (Bottom Navigation)

### 2.5.1 네비게이션 아이템
1. **자산 (Assets)**
   - 아이콘: 집 모양 아이콘
   - 상태: 현재 선택됨
   - 기능: 자산 목록 및 대시보드

2. **관심 (Watchlist)**
   - 아이콘: 별 모양 아이콘
   - 기능: 관심 자산 목록

3. **리뷰 (Review)**
   - 아이콘: 문서 모양 아이콘
   - 기능: 거래 내역 및 리뷰

4. **리그 (League)**
   - 아이콘: 트로피 모양 아이콘
   - 상태: 녹색 알림 점 포함
   - 기능: 투자 리그 및 랭킹

5. **탐색 (Explore)**
   - 아이콘: 돋보기 모양 아이콘
   - 기능: 자산 검색 및 탐색

6. **혜택 (Benefits)**
   - 아이콘: 다이아몬드 모양 아이콘
   - 상태: 녹색 알림 점 포함
   - 기능: 혜택 및 프로모션

---

# 3. 온체인 분석 기능

## 3.1 BTCs 점수 산출
- **Z-score → CDF → 백분위 변환 → 가중치 합산**
- **주요 지표**: Realized Price, MVRV Z, SOPR, Puell Multiple, HODL Waves 등 10대 핵심 온체인 메트릭
- **분석 리포트**: Claude CLI를 통해 주간 시그널·위험요인·매도 전략 제안

## 3.2 분할매도 전략
- **사용자 정의 테이블**: 범위별 매도 비율 직접 입력
- **AI 추천 테이블**: Claude CLI 분석 기반 자동 생성
- **저장 옵션**: LocalStorage + Firestore (멀티디바이스 동기화)

---

# 4. 리밸런싱 및 알림

## 4.1 리밸런싱 기준
- BTCs 점수, 자산 비중, 목표 포트폴리오 대비 괴리율

## 4.2 알림 기능 (PWA Push)
- **BTCs 90 진입 시**: "20% 매도 권고"
- **특정 자산 수익률 100% 돌파 시**: "차익 실현 권고"
- **포트폴리오 리스크 지수 상승 시**: "리밸런싱 필요"

## 4.3 자동화 확장
- Webhook/텔레그램 Bot 연결 → 실시간 알림

---

# 5. 백테스트/시뮬레이션

## 5.1 기간
- 2012~2025 (온체인/시세 데이터 기반)

## 5.2 전략 테스트
- 정적 분할매도 (규칙 기반)
- Claude CLI 추천 전략

## 5.3 결과 지표
- CAGR, MDD, 샤프지수

---

# 6. 기술 구조

## 6.1 클라이언트
- **Next.js (App Router)**
- **Tailwind + Recharts 시각화**
- **PWA 100% 지원** (오프라인 모드 + Push 알림)
- **LocalStorage + Firestore 동기화**

## 6.2 서버/분석
- **Firebase Firestore** (자산/거래/지표 데이터)
- **Claude CLI** (AI 분석/추천)
- **업비트 Open API** (실시간 시세)
- **Vercel Serverless Functions** (주간 BTSs 계산, Cron 스케줄러)

## 6.3 DB 스키마 예시
```javascript
// 사용자 자산 스키마
user_assets: {
  userId: string,
  assets: [{
    id: string,
    type: 'crypto' | 'stock' | 'commodity',
    symbol: string,
    name: string,
    quantity: number,
    unit: string,
    purchasePrice: number,
    currentPrice: number,
    currentValue: number,
    profit: number,
    profitRate: number,
    icon: string,
    status: 'UP' | 'DOWN' | 'STABLE',
    lastUpdated: timestamp
  }],
  totalValue: number,
  totalProfit: number,
  totalProfitRate: number
}

// BTC 지표 스키마
btc_metrics_weekly: {
  date: timestamp,
  realizedPrice: number,
  mvrvZ: number,
  sopr: number,
  puellMultiple: number,
  hodlWaves: object,
  btcScore: number
}

// 알림 스키마
alerts: {
  userId: string,
  type: 'btc_score' | 'profit_target' | 'rebalancing',
  message: string,
  isRead: boolean,
  createdAt: timestamp
}
```

---

# 7. 사용자 흐름 (User Flow)

## 7.1 초기 설정
1. **유저 로그인** (PWA 설치)
2. **보유 자산 등록** (BTC, ETH, 금, 주식 등)
3. **API 연동** (업비트 등 거래소 API)

## 7.2 일상 사용
1. **대시보드 확인**: 평가액/수익률/자산 비중 확인
2. **BTSs 점수 확인**: 알림 수신 (임계치 진입)
3. **분할매도 전략 테이블 확인**: 사용자 정의 or AI 추천
4. **필요 시 리밸런싱 실행**: 알림/보고서 저장
5. **주간 Claude CLI 리포트 확인**

## 7.3 모바일 UX
- **스와이프 제스처**: 자산 간 전환
- **풀 투 리프레시**: 시세 업데이트
- **롱 프레스**: 자산 상세 정보
- **탭 제스처**: 네비게이션 전환

---

# 8. UI/UX 상세 명세

## 8.1 다크 모드 지원
- **배경**: 어두운 테마
- **텍스트**: 밝은 색상
- **강조색**: 녹색 (#00FF00)
- **상태바**: 시스템 통합

## 8.2 반응형 디자인
- **모바일 우선**: 320px ~ 768px
- **태블릿**: 768px ~ 1024px
- **데스크톱**: 1024px 이상

## 8.3 접근성
- **스크린 리더 지원**
- **고대비 모드**
- **폰트 크기 조절**

---

# 9. 확장 계획

## 9.1 자동 거래
- 거래소 API(업비트/바이낸스) 연동 → 자동 매도

## 9.2 거시 지표 연동
- 금리, ETF 자금 유입, 달러인덱스 추가

## 9.3 멀티 포트폴리오
- 가족 계정/기업 계정 분리 관리

## 9.4 소셜 기능
- 투자 커뮤니티
- 포트폴리오 공유
- 투자 성과 비교

---

# 10. 성능 요구사항

## 10.1 로딩 시간
- **초기 로딩**: 3초 이내
- **자산 목록**: 1초 이내
- **시세 업데이트**: 실시간

## 10.2 오프라인 지원
- **기본 기능**: 오프라인에서도 작동
- **데이터 동기화**: 온라인 복귀 시 자동 동기화

## 10.3 배터리 최적화
- **백그라운드 업데이트**: 최소화
- **푸시 알림**: 효율적 관리

---

✅ **v2.0은 자산관리 기능을 100% 포함하여 모바일 앱 인터페이스의 모든 기능을 상세히 명세한 완전한 PRD입니다.**

